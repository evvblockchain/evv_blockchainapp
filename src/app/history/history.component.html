<div class="history-section">
    <div class="row text-center drp-container" [hidden]="userRole==='agent'">
        <div class="col">
          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle>{{selectedAgent}}</button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
              <button (click)="changeAction(agent)" class="dropdown-item"  *ngFor="let agent of agentData | async">{{agent.name}}</button>

            </div>
          </div>
        </div>
      
      
      </div>

      <div class="agent-info" [hidden]="!agentInfo" >
        <div class="card" style="width: 100%;">
          <img class="card-img-top" src="data:image/jpg;base64,{{agentInfo?agentInfo.photo:''}}" alt="Card image cap">
          <div class="card-body">
            <h5 class="card-title">{{agentInfo?agentInfo.name:''}}</h5>
            <p>Client Feedback:</p>
            <p><ngb-progressbar showValue="true" type="{{percentageOfFeedback>75?'success':percentageOfFeedback>25?'warning':'danger'}}" [value]="percentageOfFeedback"></ngb-progressbar></p>
            <p>Attitude:</p>
            <p><ngb-progressbar showValue="true" type="info" [value]=emotionGeneralAverge type="{{emotionGeneralAverge>75?'success':emotionGeneralAverge>25?'warning':'danger'}}"></ngb-progressbar></p>
            <p>Punctuality:</p>
            <p><ngb-progressbar showValue="true" type="warning" [value]="75"></ngb-progressbar></p>
             
          </div>
        </div>
      </div>
  <ul class="list-group">
    <li class="list-group-item" *ngFor="let history of historyData | async">
      <div class="row">
          <div class="col-9 vertical-center"  >
             <h5> {{history.checkintime | date }}</h5>
             <p>Check In Time: {{history.checkintime | date :'h:mm a' }}  <br>
              Check Out Time: {{history.checkouttime | date :'h:mm a' }}<br>
              Hours Worked: {{calculateHours(history)}}<br>
              Client Name: {{history.clientname }} <br>
              Client Comment: {{history.client_comment }}</p>

            
            </div>
            <div class="col-3 vertical-center float-right">
                <button type="button" class="btn btn-primary" (click)="verifyData(history,$event.target, 'verifying')" [hidden]="history.isVerified || history.isVerified==false">Verify</button>
                <img   src="assets/images/success.png" alt="" [hidden]="!history.isVerified || history.isVerified==undefined">
                <img  src="assets/images/error.png" alt="" [hidden]="history.isVerified || history.isVerified==undefined">
       
                
            </div>  
          
      </div>
    </li>
    <li class="list-group-item text-center" [hidden]="historyLength>0" >No Records Found</li>
  

  </ul>

</div>

<ng-template #modalContent let-c="close" let-d="dismiss">
    <div class="modal-header text-center">
      <h4 class="modal-title">EVV</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body text-center">
      <h4>Verification Success&hellip;</h4>
      <p><img   src="assets/images/success.png" alt=""></p> 
    <p [hidden]="!terionResultId">
        <button type="button" class="btn btn-outline-dark" (click)="viewBCTransaction()">View Bitcoin transaction</button>
         </div>
         <p class="text-center" [hidden]="terionResultId">Waiting For Response from Blockchain</p>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
    </div>
  </ng-template>

  <ng-template #FailedmodalContent let-c="close" let-d="dismiss">
      <div class="modal-header text-center">
        <h4 class="modal-title">EVV</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <h4>Verification Failed&hellip;</h4>
      <p> <img   src="assets/images/error.png" alt=""></p> 
    <p class="text-center">There is a mismatch in the record with data in Blockchain.</p>
           </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
      </div>
    </ng-template>

  